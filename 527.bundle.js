(self.webpackChunk=self.webpackChunk||[]).push([[527],{6131:(e,t,r)=>{"use strict";var n=r(6784);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(3696));t.default=function(e){var t=e.children,r=e.color,n=void 0===r?"primary":r,o=e.className,u=void 0===o?"":o,s=e.style,l=e.onClick;return a.default.createElement("div",{className:"button button-".concat(n," ").concat(u),onClick:l,style:s},t)}},2968:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useAppSelector=t.useAppDispatch=void 0;var n=r(8413);t.useAppDispatch=function(){return(0,n.useDispatch)()},t.useAppSelector=n.useSelector},1837:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uniqueID=function(){if(localStorage.getItem("userID"))return localStorage.getItem("userID");var e=Date.now()+performance.now(),t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var r=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?r:3&r|8).toString(16)}));return localStorage.setItem("userID",t),t}},6527:(e,t,r)=>{"use strict";var n=r(6784),a=r(564);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(1790)),u=n(r(8304)),s=n(r(8821)),l=n(r(8155)),c=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var r=v(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&{}.hasOwnProperty.call(e,u)){var s=o?Object.getOwnPropertyDescriptor(e,u):null;s&&(s.get||s.set)?Object.defineProperty(n,u,s):n[u]=e[u]}return n.default=e,r&&r.set(e,n),n}(r(3696)),i=r(2968),f=r(9315),p=r(2838),d=r(5588),x=r(1422),m=r(1837),y=n(r(6131));function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(v=function(e){return e?r:t})(e)}function g(e){var t=e.timestamp,r=e.order,n=e.triggerReloadData,a=(0,f.useTranslation)(),u=a.t,s=a.i18n,v=(0,i.useAppDispatch)(),g=(0,i.useAppSelector)((function(e){return e.item.items})),h=function(){var e=(0,l.default)(o.default.mark((function e(){var r,a;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v((0,x.setLoading)(!0)),e.next=3,fetch("".concat("https://script.google.com/macros/s/AKfycbzcUoCyZ6_2z8A9G8au9Y1xSZt6Ebrj9sOD5OShPAHrogvGzoZ1ikvNDOlFS_5fYnXc/exec","?act=delete_history"),{method:"POST",headers:{"content-type":"text/plain"},body:JSON.stringify({userId:(0,m.uniqueID)(),timestamp:t})});case 3:return r=e.sent,e.next=6,r.json();case 6:a=e.sent,v((0,x.setLoading)(!1)),"success"===a.message?(v((0,d.setAlert)(u("msg_removeHistoruSuccess"))),n()):v((0,d.setAlert)(a.message));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return c.default.createElement("div",{className:"historyBlock"},c.default.createElement("p",{className:"historyID"},"#",t),c.default.createElement("ul",null,r.map((function(e){var t=g.find((function(t){return t.id===e.id}));return c.default.createElement("li",{key:e.id,className:t?"":"noLongerForSale"},c.default.createElement("span",{className:"historyItemName"},(null==t?void 0:t.name[s.language])||e.id),c.default.createElement("span",{className:"historyItemQuantity"},"x",e.quantity),!t&&c.default.createElement("span",{className:"noLongerForSaleMsg"},"(",u("msg_noLongerForSale"),")"))}))),c.default.createElement("div",{className:"historyButtons"},c.default.createElement(y.default,{color:"gray",onClick:h},u("button_remove")),c.default.createElement(y.default,{onClick:function(){v((0,p.buyAgain)(r.filter((function(e){var t=e.id;return g.find((function(e){return e.id===t}))})))),v((0,p.showCartList)(!0))}},u("button_buyAgain"))))}t.default=function(){var e=(0,i.useAppDispatch)(),t=(0,c.useState)([]),r=(0,s.default)(t,2),n=r[0],a=r[1],f=(0,c.useState)(0),p=(0,s.default)(f,2),d=p[0],y=p[1],v=function(){var t=(0,l.default)(o.default.mark((function t(){var r,n;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e((0,x.setLoading)(!0)),t.next=3,fetch("".concat("https://script.google.com/macros/s/AKfycbzcUoCyZ6_2z8A9G8au9Y1xSZt6Ebrj9sOD5OShPAHrogvGzoZ1ikvNDOlFS_5fYnXc/exec","?act=histories&user_id=").concat((0,m.uniqueID)()));case 3:return r=t.sent,t.next=6,r.json();case 6:n=t.sent,a(n),e((0,x.setLoading)(!1));case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return(0,c.useEffect)((function(){v()}),[d]),c.default.createElement("div",{className:"history"},n.map((function(e){return c.default.createElement(g,(0,u.default)({key:e.timestamp},e,{triggerReloadData:function(){y(Date.now())}}))})))}},8113:e=>{e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n},e.exports.__esModule=!0,e.exports.default=e.exports},569:e=>{e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},8304:e=>{function t(){return e.exports=t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},5474:e=>{e.exports=function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,u,s=[],l=!0,c=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(c)throw a}}return s}},e.exports.__esModule=!0,e.exports.default=e.exports},1018:e=>{e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},8821:(e,t,r)=>{var n=r(569),a=r(5474),o=r(7744),u=r(1018);e.exports=function(e,t){return n(e)||a(e,t)||o(e,t)||u()},e.exports.__esModule=!0,e.exports.default=e.exports},7744:(e,t,r)=>{var n=r(8113);e.exports=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports}}]);